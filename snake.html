<html>
    <style>
:root {
  --main-bg-color: #bfc8b2;
  --deem-color: #9da591;
  --dark-color: #000000;
  --pixel-size: 0.6em;
  --pixel-border-size: 0.2em;
}
div {
    float: left;
}
span {
    border: var(--pixel-border-size) solid var(--main-bg-color);
    outline: var(--pixel-border-size) solid var(--deem-color);
    background-color: var(--deem-color);
    content: " ";
    display: block;
    width: var(--pixel-size);
    height: var(--pixel-size);
    margin: 0.15em;
}
.active {
    outline-color: var(--dark-color);
    background-color: var(--dark-color);
}
table {
    background-color: var(--main-bg-color);
    border: .1em solid;
}
</style>
    <body>
        <div>
            <table>
                <tr>
                    <td><span id="pixel_0_0"></span></td>
                    <td><span id="pixel_1_0"></span></td>
                    <td><span id="pixel_2_0"></span></td>
                    <td><span id="pixel_3_0"></span></td>
                    <td><span id="pixel_4_0"></span></td>
                    <td><span id="pixel_5_0"></span></td>
                    <td><span id="pixel_6_0"></span></td>
                    <td><span id="pixel_7_0"></span></td>
                    <td><span id="pixel_8_0"></span></td>
                    <td><span id="pixel_9_0"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_1"></span></td>
                    <td><span id="pixel_1_1"></span></td>
                    <td><span id="pixel_2_1"></span></td>
                    <td><span id="pixel_3_1"></span></td>
                    <td><span id="pixel_4_1"></span></td>
                    <td><span id="pixel_5_1"></span></td>
                    <td><span id="pixel_6_1"></span></td>
                    <td><span id="pixel_7_1"></span></td>
                    <td><span id="pixel_8_1"></span></td>
                    <td><span id="pixel_9_1"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_2"></span></td>
                    <td><span id="pixel_1_2"></span></td>
                    <td><span id="pixel_2_2"></span></td>
                    <td><span id="pixel_3_2"></span></td>
                    <td><span id="pixel_4_2"></span></td>
                    <td><span id="pixel_5_2"></span></td>
                    <td><span id="pixel_6_2"></span></td>
                    <td><span id="pixel_7_2"></span></td>
                    <td><span id="pixel_8_2"></span></td>
                    <td><span id="pixel_9_2"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_3"></span></td>
                    <td><span id="pixel_1_3"></span></td>
                    <td><span id="pixel_2_3"></span></td>
                    <td><span id="pixel_3_3"></span></td>
                    <td><span id="pixel_4_3"></span></td>
                    <td><span id="pixel_5_3"></span></td>
                    <td><span id="pixel_6_3"></span></td>
                    <td><span id="pixel_7_3"></span></td>
                    <td><span id="pixel_8_3"></span></td>
                    <td><span id="pixel_9_3"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_4"></span></td>
                    <td><span id="pixel_1_4"></span></td>
                    <td><span id="pixel_2_4"></span></td>
                    <td><span id="pixel_3_4"></span></td>
                    <td><span id="pixel_4_4"></span></td>
                    <td><span id="pixel_5_4"></span></td>
                    <td><span id="pixel_6_4"></span></td>
                    <td><span id="pixel_7_4"></span></td>
                    <td><span id="pixel_8_4"></span></td>
                    <td><span id="pixel_9_4"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_5"></span></td>
                    <td><span id="pixel_1_5"></span></td>
                    <td><span id="pixel_2_5"></span></td>
                    <td><span id="pixel_3_5"></span></td>
                    <td><span id="pixel_4_5"></span></td>
                    <td><span id="pixel_5_5"></span></td>
                    <td><span id="pixel_6_5"></span></td>
                    <td><span id="pixel_7_5"></span></td>
                    <td><span id="pixel_8_5"></span></td>
                    <td><span id="pixel_9_5"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_6"></span></td>
                    <td><span id="pixel_1_6"></span></td>
                    <td><span id="pixel_2_6"></span></td>
                    <td><span id="pixel_3_6"></span></td>
                    <td><span id="pixel_4_6"></span></td>
                    <td><span id="pixel_5_6"></span></td>
                    <td><span id="pixel_6_6"></span></td>
                    <td><span id="pixel_7_6"></span></td>
                    <td><span id="pixel_8_6"></span></td>
                    <td><span id="pixel_9_6"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_7"></span></td>
                    <td><span id="pixel_1_7"></span></td>
                    <td><span id="pixel_2_7"></span></td>
                    <td><span id="pixel_3_7"></span></td>
                    <td><span id="pixel_4_7"></span></td>
                    <td><span id="pixel_5_7"></span></td>
                    <td><span id="pixel_6_7"></span></td>
                    <td><span id="pixel_7_7"></span></td>
                    <td><span id="pixel_8_7"></span></td>
                    <td><span id="pixel_9_7"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_8"></span></td>
                    <td><span id="pixel_1_8"></span></td>
                    <td><span id="pixel_2_8"></span></td>
                    <td><span id="pixel_3_8"></span></td>
                    <td><span id="pixel_4_8"></span></td>
                    <td><span id="pixel_5_8"></span></td>
                    <td><span id="pixel_6_8"></span></td>
                    <td><span id="pixel_7_8"></span></td>
                    <td><span id="pixel_8_8"></span></td>
                    <td><span id="pixel_9_8"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_9"></span></td>
                    <td><span id="pixel_1_9"></span></td>
                    <td><span id="pixel_2_9"></span></td>
                    <td><span id="pixel_3_9"></span></td>
                    <td><span id="pixel_4_9"></span></td>
                    <td><span id="pixel_5_9"></span></td>
                    <td><span id="pixel_6_9"></span></td>
                    <td><span id="pixel_7_9"></span></td>
                    <td><span id="pixel_8_9"></span></td>
                    <td><span id="pixel_9_9"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_10"></span></td>
                    <td><span id="pixel_1_10"></span></td>
                    <td><span id="pixel_2_10"></span></td>
                    <td><span id="pixel_3_10"></span></td>
                    <td><span id="pixel_4_10"></span></td>
                    <td><span id="pixel_5_10"></span></td>
                    <td><span id="pixel_6_10"></span></td>
                    <td><span id="pixel_7_10"></span></td>
                    <td><span id="pixel_8_10"></span></td>
                    <td><span id="pixel_9_10"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_11"></span></td>
                    <td><span id="pixel_1_11"></span></td>
                    <td><span id="pixel_2_11"></span></td>
                    <td><span id="pixel_3_11"></span></td>
                    <td><span id="pixel_4_11"></span></td>
                    <td><span id="pixel_5_11"></span></td>
                    <td><span id="pixel_6_11"></span></td>
                    <td><span id="pixel_7_11"></span></td>
                    <td><span id="pixel_8_11"></span></td>
                    <td><span id="pixel_9_11"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_12"></span></td>
                    <td><span id="pixel_1_12"></span></td>
                    <td><span id="pixel_2_12"></span></td>
                    <td><span id="pixel_3_12"></span></td>
                    <td><span id="pixel_4_12"></span></td>
                    <td><span id="pixel_5_12"></span></td>
                    <td><span id="pixel_6_12"></span></td>
                    <td><span id="pixel_7_12"></span></td>
                    <td><span id="pixel_8_12"></span></td>
                    <td><span id="pixel_9_12"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_13"></span></td>
                    <td><span id="pixel_1_13"></span></td>
                    <td><span id="pixel_2_13"></span></td>
                    <td><span id="pixel_3_13"></span></td>
                    <td><span id="pixel_4_13"></span></td>
                    <td><span id="pixel_5_13"></span></td>
                    <td><span id="pixel_6_13"></span></td>
                    <td><span id="pixel_7_13"></span></td>
                    <td><span id="pixel_8_13"></span></td>
                    <td><span id="pixel_9_13"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_14"></span></td>
                    <td><span id="pixel_1_14"></span></td>
                    <td><span id="pixel_2_14"></span></td>
                    <td><span id="pixel_3_14"></span></td>
                    <td><span id="pixel_4_14"></span></td>
                    <td><span id="pixel_5_14"></span></td>
                    <td><span id="pixel_6_14"></span></td>
                    <td><span id="pixel_7_14"></span></td>
                    <td><span id="pixel_8_14"></span></td>
                    <td><span id="pixel_9_14"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_15"></span></td>
                    <td><span id="pixel_1_15"></span></td>
                    <td><span id="pixel_2_15"></span></td>
                    <td><span id="pixel_3_15"></span></td>
                    <td><span id="pixel_4_15"></span></td>
                    <td><span id="pixel_5_15"></span></td>
                    <td><span id="pixel_6_15"></span></td>
                    <td><span id="pixel_7_15"></span></td>
                    <td><span id="pixel_8_15"></span></td>
                    <td><span id="pixel_9_15"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_16"></span></td>
                    <td><span id="pixel_1_16"></span></td>
                    <td><span id="pixel_2_16"></span></td>
                    <td><span id="pixel_3_16"></span></td>
                    <td><span id="pixel_4_16"></span></td>
                    <td><span id="pixel_5_16"></span></td>
                    <td><span id="pixel_6_16"></span></td>
                    <td><span id="pixel_7_16"></span></td>
                    <td><span id="pixel_8_16"></span></td>
                    <td><span id="pixel_9_16"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_17"></span></td>
                    <td><span id="pixel_1_17"></span></td>
                    <td><span id="pixel_2_17"></span></td>
                    <td><span id="pixel_3_17"></span></td>
                    <td><span id="pixel_4_17"></span></td>
                    <td><span id="pixel_5_17"></span></td>
                    <td><span id="pixel_6_17"></span></td>
                    <td><span id="pixel_7_17"></span></td>
                    <td><span id="pixel_8_17"></span></td>
                    <td><span id="pixel_9_17"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_18"></span></td>
                    <td><span id="pixel_1_18"></span></td>
                    <td><span id="pixel_2_18"></span></td>
                    <td><span id="pixel_3_18"></span></td>
                    <td><span id="pixel_4_18"></span></td>
                    <td><span id="pixel_5_18"></span></td>
                    <td><span id="pixel_6_18"></span></td>
                    <td><span id="pixel_7_18"></span></td>
                    <td><span id="pixel_8_18"></span></td>
                    <td><span id="pixel_9_18"></span></td>
                </tr>
                <tr>
                    <td><span id="pixel_0_19"></span></td>
                    <td><span id="pixel_1_19"></span></td>
                    <td><span id="pixel_2_19"></span></td>
                    <td><span id="pixel_3_19"></span></td>
                    <td><span id="pixel_4_19"></span></td>
                    <td><span id="pixel_5_19"></span></td>
                    <td><span id="pixel_6_19"></span></td>
                    <td><span id="pixel_7_19"></span></td>
                    <td><span id="pixel_8_19"></span></td>
                    <td><span id="pixel_9_19"></span></td>
                </tr>
            </table>
        </div>
        <div>
            <table style="padding: 1em;">
                <tr>
                    <td><h1>Snake Game</h1></td>
                </tr>
                <tr>
                    <td>Score: <text id="score"><b>0</b></text></td>
                </tr>
                <tr>
                    <td>Level: <text id="level"><b>0</b></text></td>
                </tr>
                <tr>
                    <td>Message: <b><text id="message"></text></b></td>
                </tr>
                <tr>
                    <td>Restart: <button onclick="init()">Restart</button> </td>
                </tr>
                <tr id="pause">
                    <td>Pause: <button onclick="pause()">Pause</button> <b>[space]</b> </td>
                </tr>
                <tr id="resume" style="display: none;">
                    <td>Resume: <button onclick="resume()">Resume</button> <b>[space]</b> </td>
                </tr>
            </table>
        </div>
    </body>
<script>

function isAlreadyThere(x, y, availableList) {
    for (var i = 0; i < availableList.length -1; i++) {
        if (availableList[i].x == x && availableList[i].y == y) {
            return true;
        }
    }
    return false;
}

function generateNewFood(food, availableList) {
    x = Math.floor(Math.random() * 9 + 0)
    y = Math.floor(Math.random() * 19 + 0)
    for (var xc = 0; xc < 10; xc++) {
        for (var yc = 0; yc < 20; yc++) {
            var newX = (x + xc)% 10;
            var newY = (y + yc)% 20;
            if (!isAlreadyThere(newX, newY, availableList) && food.x != newX && food.y != newY) {
                return { x: newX, y: newY }
            }
        }
    }
    return null;
}

var speed = null;
var list = null;
var direction = null;
var keyCode = null
var score = 0;
var level = 1;
var food = null;
var timer = null;
var status = null;

function move() {
    direction = keyCode;
    var oldHead = list[0];
    var newHead = {};
    if (direction == "up") {
        newHead = {
            x: oldHead.x,
            y: (oldHead.y - 1 + 20 ) % 20
        }
    } else if (direction == "down") {
        newHead = {
            x: oldHead.x,
            y: (oldHead.y + 1 + 20 ) % 20
        }
    } else if (direction == "left") {
        newHead = {
            x: (oldHead.x - 1 + 10 ) % 10,
            y: oldHead.y
        }
    } else if (direction == "right") {
        newHead = {
            x: (oldHead.x + 1 + 10 ) % 10,
            y: oldHead.y
        }
    }
    if (isAlreadyThere(newHead.x, newHead.y, list)) {
        document.getElementById("message").innerText = "Game Over..!";
        status = "stop";
        clearInterval(timer);
        timer = null;
        return;
    }
    if (newHead.x == food.x && newHead.y == food.y) {
        score += 1;
        if (score % 10 == 0) {
            level += 1;
            document.getElementById("level").innerText = level;
            speed = Math.floor(speed * 0.9);
            clearInterval(timer);
            timer = setInterval(move, speed);
        }
        document.getElementById("score").innerText = score;
        food = generateNewFood(food, list);
        if (food == null) {
            document.getElementById("message").innerText = "You Won..!";
            status = "stop";
            clearInterval(timer);
            timer = null;
            return;
        }
        console.debug(food)
    } else {
        var last = list.pop()
        document.getElementById(`pixel_${last.x}_${last.y}`).className = "";
    }
    console.debug(`pixel_${newHead.x}_${newHead.y}`, newHead);
    document.getElementById(`pixel_${newHead.x}_${newHead.y}`).className = "active";
    document.getElementById(`pixel_${food.x}_${food.y}`).className = "active";
    list.unshift(newHead);
}

function init() {
    list = [{
        x: 0,
        y: 0
    }];
    speed = 300;
    direction = "right";
    keyCode = "right";
    status = "start";
    score = 0;
    food = {
        x: Math.floor(Math.random() * 9 + 0),
        y: Math.floor(Math.random() * 19 + 0)
    };
    for (var xc = 0; xc < 10; xc++) {
        for (var yc = 0; yc < 20; yc++) {
            document.getElementById(`pixel_${xc}_${yc}`).className = "";
        }
    }
    document.getElementById("level").innerText = level;
    document.getElementById("score").innerText = score;
    document.getElementById("pixel_0_0").className = "active";
    document.getElementById(`pixel_${food.x}_${food.y}`).className = "active";
    document.getElementById("message").innerText = "Game Started..!";
    if (timer == null) {
        timer = setInterval(move, speed);
    }
}

function pause() {
    if (status == "start") {
        status = "pause";
        clearInterval(timer);
        timer = null;
        document.getElementById("message").innerText = "Game Paused..!";
        document.getElementById("pause").style = "display: none;";
        document.getElementById("resume").style = "";
    }
}

function resume() {
    if (status == "pause") {
        status = "start";
        timer = setInterval(move, speed);
        document.getElementById("message").innerText = "Game Resumed..!";
        document.getElementById("pause").style = "";
        document.getElementById("resume").style = "display: none;";
    }
}

document.addEventListener('keyup', (e) => {
    if (e.code == 'Space') {
        if (status == "start") {
            pause();
        } else if (status == "pause") {
            resume();
        }
    }
    if ((e.code == 'ArrowUp' || e.code == 'KeyW') && direction != "down") {
        keyCode = "up";
    } else if ((e.code == 'ArrowDown' || e.code == 'KeyS') && direction != "up") {
        keyCode = "down";
    } else if ((e.code == 'ArrowLeft' || e.code == 'KeyA') && direction != "right") {
        keyCode = "left";
    } else if ((e.code == 'ArrowRight' || e.code == 'KeyD') && direction != "left") {
        keyCode = "right";
    }
});

init();

</script>
</html>
